<h1>Détail de l'inscription de <%= @registration.user.first_name %> <%= @registration.user.last_name %> à : <br>
  <%= @registration.registerable.name %>
</h1>

<fieldset>
  <legend>Informations personnelles</legend>
  <ul>
    <li><strong>Prénom :</strong> <%= @registration.user.first_name %></li>
    <li><strong>Nom :</strong> <%= @registration.user.last_name %></li>
    <li><strong>Date de naissance :</strong> <%= @registration.user.birth_date %></li>
    <li><strong>Téléphone :</strong> <%= @registration.user.phone_number %></li>
    <li><strong>Email :</strong> <%= @registration.user.email %></li>
    <li><strong>Adresse :</strong> <%= @registration.user.address %></li>
    <li><strong>Code postal :</strong> <%= @registration.user.post_code %></li>
    <li><strong>Ville :</strong> <%= @registration.user.town %></li>
  </ul>
</fieldset>

<fieldset>
  <legend>Informations sur la course</legend>
  <ul>
    <li><strong>Numéro de course :</strong> <%= @registration.race_number %></li>
    <li><strong>Code licence :</strong> <%= @registration.user.license_code %></li>
    <li><strong>Numéro licence :</strong> <%= @registration.user.license_number %></li>
    <li><strong>Nom du club :</strong> <%= @registration.user.club_name %> <%= @registration.user.club_affiliation_number %></li>
  </ul>
</fieldset>

<fieldset>
  <legend>Informations véhicule</legend>
  <ul>
    <li><strong>Marque moto :</strong> <%= @registration.bike_brand %></li>
    <li><strong>Cylindrée :</strong> <%= @registration.cylinder_capacity %></li>
    <li><strong>Type de moteur :</strong> <%= @registration.stroke_type %></li>
  </ul>
</fieldset>

<% return unless current_user.admin? %> <%# Vérifie que seul un admin peut voir ces actions %>
  <p><strong>Statut actuel :</strong> <%= @registration.status.capitalize %></p>

  <div class="btn-group mt-2">

    <% unless @registration.validated? %> <!-- Exécute le code sauf si l'inscription est validée -->
      <%= form_with url: admin_validate_admin_registration_path(@registration), method: :patch, class: "d-inline" do %>
        <%= submit_tag "Valider", class: "btn btn-success btn-sm", data: { turbo_confirm: "Confirmer la validation ?" } %>
      <% end %>
    <% end %>

    <% unless @registration.rejected? %> <%# Exécute le code sauf si l'inscription est rejetée %>
      <%= form_with url: admin_reject_admin_registration_path(@registration), method: :patch, class: "d-inline" do %>
        <%= submit_tag "Refuser", class: "btn btn-danger btn-sm", data: { turbo_confirm: "Confirmer le refus ?" } %>
      <% end %>
    <% end %>

    <% unless @registration.pending? %>  <%# Exécute le code sauf si l'inscription est en attente %>
      <%= form_with url: admin_reset_admin_registration_path(@registration), method: :patch, class: "d-inline" do %>
        <%#  Crée un formulaire PATCH vers la route de réinitialisation (retour à 'pending') %>
        <%= submit_tag "Remettre en attente", class: "btn btn-warning btn-sm", data: { turbo_confirm: "Remettre l'inscription en attente ?" } %>
      <% end %>
    <% end %>

  </div>

