<h1>Bienvenue <%= current_user.first_name %> !</h1>
<p>Voici ton tableau de bord membre. Tu pourras retrouver ici tes prochaines activités, inscriptions et actualités !</p>

<h2>Mes inscriptions</h2>

<% if @registrations.any? %>
  <ul>
    <% @registrations.each do |registration| %>
      <li>
        <strong><%= registration.registerable_type %> :</strong>
        <% registerable = registration.registerable %>

        <%# Lien vers l’activité selon son type %>
        <% case registration.registerable_type %>
        <% when 'Event' %>
          <%= link_to registerable.name, members_event_path(registerable) %>
        <% when 'Race' %>
          <%= link_to registerable.name, members_race_path(registerable) %>
        <% when 'Training' %>
          <%= link_to registerable.name, members_training_path(registerable) %>
        <% end %>

        <br>
        <em>Inscrit le <%= (registration.created_at, format: :short) %></em>
            <%= link_to members_registration_path(registration),
            data: { turbo_method: :delete, turbo_confirm: "Es-tu sûr de vouloir supprimer ton inscription ?" },
            class: "btn btn-danger",
            aria: { label: "Supprimer l'inscription #{@race.name}" } do %>
            <i class="fas fa-trash"></i>
          <% end %>

      </li>
    <% end %>
  </ul>
<% else %>
  <p>Vous n’êtes inscrit à aucune activité pour le moment.</p>
<% end %>


<hr>

<h3>Les courses</h3>

<% if @races.empty? %>
  <p>Il n'y a pas de course pour l'instant</p>
<% else %>
  <ul>
    <% @races.each do |race| %>
      <li><%= race.name %>
          <%= link_to members_race_path(race), class: "btn btn-primary", aria: { label: "Voir la course #{race.name}" } do %>
            <i class="fas fa-search"></i>
          <% end %>
        </li>
    <% end %>
  </ul>
<% end %>

<hr>
