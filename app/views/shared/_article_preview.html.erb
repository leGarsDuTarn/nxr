<section class="profile-user banner-dashboard">
    <div class="container py-5 text-start">
      <h1 class="display-5 fw-bold mb-0">
        Toutes les actualités
      </h1>
      <p class="lead">Découvrez toutes les dernières nouvelles du club </p>
    </div>
  </section>

<section class="container my-5">
  <% has_articles = @articles.present? %>

  <% if has_articles %>
    <div class="row g-4">
      <% @articles.each do |article| %>
        <div class="col-sm-6 col-lg-4 mx-auto">
          <article class="card card-admin shadow-sm rounded-4 h-100 overflow-hidden">

            <!-- Image -->
            <div class="ratio ratio-4x3 bg-dark">
              <% if article.image.attached? %>
                <%= image_tag article.image,
                      class: "card-img-top object-cover",
                      alt: article.title %>
              <% else %>
                <%= image_tag "default_article.jpeg",
                      class: "card-img-top object-contain p-3",
                      alt: article.title %>
              <% end %>
            </div>

            <!-- Body -->
            <div class="card-body d-flex flex-column">
              <h5 class="fw-bold mb-2">
                <%= link_to article.title, public_article_path(article),
                      class: "stretched-link text-decoration-none text-color-primary" %>
              </h5>

              <p class="flex-grow-1 mb-2">
                <%= truncate(article.content, length: 100, separator: ' ') %>
              </p>

              <small class="text-tertiary d-block mb-2">
                <i class="far fa-calendar-alt me-1"></i>
                Publié le <%= l(article.created_at.to_date, format: "%d %B %Y") %>
              </small>

               <small class="text-tertiary d-block mb-2">
                <i class=" fa-solid fa-pen-nib me-1"></i>
                Rédigé par : <%= article.user.user_name %>
              </small>

              <div class="mt-2 d-flex align-items-center justify-content-between">
                <%= link_to public_article_path(article),
                      class: "btn-nxr" do %>
                  <i class="fa-regular fa-newspaper me-1"></i> Lire l’article
                <% end %>
                </div>
              </div>
            </div>
          </article>
        </div>
      <% end %>
    </div>
  <% else %>
    <!-- Empty state -->
    <div class="card-homepage shadow-sm rounded-4 text-center p-5 mx-auto" style="max-width: 640px;">
      <div class="mb-3">
        <i class="far fa-newspaper fa-3x"></i>
      </div>
      <h3 class="h5 fw-bold mb-2">Aucun article publié pour le moment</h3>
      <p class="mb-0">Soyez le premier à partager une actualité du club ✍️</p>
    </div>
  <% end %>
</section>
