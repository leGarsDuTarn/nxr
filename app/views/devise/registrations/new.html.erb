<div class="container d-flex justify-content-center align-items-start py-5">
  <div class="card-signup shadow p-4 p-md-5 rounded-4 w-100">
    <div class="d-flex justify-content-center mb-4">
      <h1 class="text-center"><strong>Créer un compte</strong></h1>
    </div>


    <%= simple_form_for(resource, as: resource_name, url: registration_path(resource_name)) do |f| %>
      <%= f.error_notification %>

      <!-- Identité -->
      <fieldset class="form-section mb-4">
        <legend class="section-title">Identité</legend>
        <div class="row g-3">
          <div class="col-md-6">
            <%= f.input :user_name, autofocus: true, required: true,
                        placeholder: "Pseudo" %>
          </div>
          <div class="col-md-6">
            <%= f.input :birth_date, as: :date, required: true,
                        start_year: Date.current.year - 80,
                        end_year: Date.current.year - 10,
                        order: [:day, :month, :year],
                        prompt: { day: 'Jour', month: 'Mois', year: 'Année' } %>
          </div>
          <div class="col-md-6">
            <%= f.input :first_name, required: true, placeholder: "Prénom" %>
          </div>
          <div class="col-md-6">
            <%= f.input :last_name, required: true, placeholder: "Nom" %>
          </div>
          <div class="col-12">
            <%= f.input :avatar, as: :file, required: false,
                        hint: "Photo de profil (optionnel)." %>
          </div>
        </div>
      </fieldset>

      <!-- Coordonnées -->
      <fieldset class="form-section mb-4">
        <legend class="section-title">Coordonnées</legend>
        <div class="row g-3">
          <div class="col-md-6">
            <%= f.input :phone_number,
                        hint: "Recommandé - pour vous prévenir rapidement (annulation, urgence…)" %>
          </div>
          <div class="col-md-6">
            <%= f.input :email, required: true,
                        input_html: { autocomplete: "email" },
                        placeholder: "vous@exemple.fr" %>
          </div>
          <div class="col-12">
            <%= f.input :address, required: true, placeholder: "N° et rue" %>
          </div>
          <div class="col-md-4">
            <%= f.input :post_code, required: true, placeholder: "Code postal" %>
          </div>
          <div class="col-md-8">
            <%= f.input :town, required: true, placeholder: "Ville" %>
          </div>
        </div>
      </fieldset>

      <!-- Club -->
      <fieldset class="form-section mb-4" data-controller="club-member-check">
        <legend class="section-title">Club</legend>
        <div class="row g-3">
          <div class="col-md-6">
            <%= f.input :club_member,
                        label: "Êtes-vous membre du club de Navès ?",
                        as: :select,
                        collection: [['Oui', true], ['Non', false]],
                        include_blank: "Sélectionner",
                        required: true,
                        input_html: {
                          data: {
                            "club-member-check-target": "select",
                            action: "change->club-member-check#toggle"
                          }
                        } %>
          </div>

          <!-- Affiché si Non -->
          <div class="col-md-6" data-club-member-check-target="clubNameWrapper" style="display:none;">
            <%= f.input :club_name, label: "Nom de votre club", placeholder: "Nom du club" %>
          </div>

          <!-- Affiché si Oui -->
          <div class="col-md-6" data-club-member-check-target="affiliationWrapper" style="display:none;">
            <%= f.input :club_affiliation_number, label: "N° d'affiliation du club de Navès" %>
          </div>
        </div>
      </fieldset>

      <!-- Licence -->
      <fieldset class="form-section mb-4">
        <legend class="section-title">Licence</legend>
        <div class="row g-3">
          <div class="col-md-6">
            <%= f.input :license_code, required: true, as: :select,
                        collection: User::LICENCE_CODES,
                        include_blank: "Sélectionner un code" %>
          </div>
          <div class="col-md-6">
            <%= f.input :license_number, required: true, placeholder: "Numéro à 6 chiffres" %>
          </div>
        </div>
      </fieldset>

      <!-- Sécurité -->
      <fieldset class="form-section mb-4">
        <legend class="section-title">Sécurité</legend>
        <div class="row g-3">
          <div class="col-md-6">
            <%= f.input :password, required: true,
                        hint: "Min. 8 caractères avec majuscule, minuscule, chiffre et caractère spécial.",
                        input_html: { autocomplete: "new-password" } %>
          </div>
          <div class="col-md-6">
            <%= f.input :password_confirmation, required: true,
                        input_html: { autocomplete: "new-password" } %>
          </div>
        </div>
      </fieldset>

      <div class="d-grid">
        <%= f.button :submit, "Créer mon compte", class: "btn-nxr btn-lg" %>
      </div>
    <% end %>

    <div class="text-center mt-3">
      <%= render "devise/shared/links" %>
    </div>
  </div>
</div>
